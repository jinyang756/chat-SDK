# 在线客服系统SDK

本项目是一个独立的在线客服系统SDK，提供了完整的侧边栏客服解决方案，支持响应式布局和现代化的客服交互体验。

## 项目简介

本项目是一个轻量级但功能完整的客服系统前端SDK，实现了：

- ✅ 使用iframe嵌入客服窗口
- ✅ 响应式设计，适配不同尺寸的设备
- ✅ 完整的功能模块（客服面板、资料下载、保存通道等）
- ✅ 商用级别的稳定性与安全性
- ✅ 支持多种部署方式（传统服务器、Vercel、Netlify等）

## 核心功能

- OnlineChat客服面板（嵌入式）
- 指标大礼包功能（文件下载）
- 保存通道功能
- 响应式布局适配
- 随机访客ID生成与记忆

## 本地开发

### 前置要求

- Node.js (>=16.0.0)

### 启动方法

1. 安装依赖（如果有）：
```bash
npm install
```

2. 启动本地服务器：
```bash
npm run dev
```

3. 打开浏览器，访问 `http://localhost:8080` 查看效果

## 配置说明

### 客服服务器配置

在 `index.html` 文件中，您需要修改以下代码来配置您的客服系统服务器地址：

```javascript
// 获取客服系统URL
function getCustomerServiceUrl(visitorId) {
    // 这里可以根据需要配置您的客服系统服务器地址
    // 注意：实际部署时需要替换为您自己的客服系统服务地址
    // 以下是一个示例地址，实际使用时请替换为有效的客服系统服务地址
    // 如果使用iframe嵌入遇到跨域问题，可以考虑使用window.open的方式
    return 'https://your-chat-service.com/chat?uid=' + visitorId;
}```

将 `https://your-chat-service.com/chat` 替换为您实际的客服系统服务地址。

### 客服窗口打开方式配置

项目支持两种客服窗口打开方式，可以在 `index.html` 文件中配置：

```javascript
// 客服配置选项
const chatConfig = {
    // 选择客服窗口的打开方式: 'iframe' 或 'window'
    // 如果遇到跨域问题，建议使用 'window' 方式
    openMethod: 'iframe' // 可选值: 'iframe', 'window'
};```

- **iframe方式**（默认）：在侧边栏面板中直接嵌入客服窗口
- **window方式**：在新窗口中打开客服页面，可有效避免跨域限制

### 文件结构说明

- `index.html` - 主页面，包含侧边栏基础结构和功能按钮
- `qiliantong-download.html` - 指标大礼包页面
- `package.json` - 项目配置和脚本定义
- `vercel.json` - Vercel部署配置文件
- `.gitignore` - Git忽略规则

## 功能实现说明

### 1. 客服面板功能

作为SDK的核心功能模块，客服面板提供了完整的前端交互接口：
- 自动渲染右下角悬浮客服按钮，并支持点击展开功能菜单
- 封装了"在线客服"交互流程，一键打开客服窗口
- 内置两种灵活的客服窗口打开策略：
  - iframe嵌入模式：在侧边栏面板内直接集成客服页面，保持用户在当前页面的体验（默认）
  - 新窗口模式：通过window.open在独立浏览器窗口打开客服页面，有效规避复杂跨域场景下的兼容性问题
- 提供完整的面板状态管理，支持关闭、最小化和返回操作
- 实现访客身份持久化机制，自动生成唯一访客ID并通过localStorage存储，确保跨会话的沟通连续性
- SDK内部处理了面板的动画效果、响应式调整和错误边界，开发者无需关心底层实现细节

### 2. 增值服务模块

SDK内置了可扩展的增值服务模块，默认提供资料下载功能：
- 点击功能菜单中的对应按钮打开资料下载页面
- 支持配置多种文档、报告和资料供访客下载
- 提供完整的页面导航逻辑，支持返回客服面板
- 开发者可以根据业务需求自定义和扩展此模块的功能

### 3. 访客信息管理

SDK提供了访客信息管理功能：
- 支持收集和保存访客的基本信息和访问轨迹
- 提供可扩展的信息存储接口，默认使用localStorage实现客户端存储
- 预留了与后端系统集成的接口，支持将访客信息同步到服务器
- 可根据业务需求自定义信息收集的内容和流程

## 部署说明

将项目文件部署到您的Web服务器上即可，无需特殊构建过程。

### 支持的部署方式

- **传统Web服务器**：将所有文件上传到Nginx、Apache等Web服务器的根目录
- **Vercel**：项目包含vercel.json配置文件，可直接部署到Vercel
- **Netlify**：支持一键部署
- **GitHub Pages**：可发布到GitHub Pages服务

### 缓存控制配置

项目已包含Vercel的缓存控制配置，其他服务器可参考以下示例：

#### Nginx配置
```nginx
location / {
    add_header Cache-Control "public, max-age=3600";
    # 其他配置...
}
```

#### Apache配置
```apache
<IfModule mod_headers.c>
    Header set Cache-Control "public, max-age=3600"
</IfModule>
```

## 注意事项

1. 确保OnlineChat服务地址正确配置，否则无法正常加载客服窗口
2. 如需在生产环境使用，请替换示例中的模拟下载链接为真实的文件地址
3. 响应式设计支持移动端和桌面端，但在小屏幕设备上可能需要调整部分样式
4. 项目使用了Font Awesome图标库，确保网络连接正常以加载图标

## 许可证

本项目采用MIT许可证 - 详见LICENSE文件